{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst RemoteStreamer = registerPlugin('RemoteStreamer', {\n    web: () => import('./web').then(m => new m.RemoteStreamerWeb()),\n});\nexport * from './definitions';\nexport { RemoteStreamer };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class RemoteStreamerWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.audio = null;\n        this.intervalId = null;\n        this.isLooping = false;\n    }\n    async setNowPlayingInfo(options) {\n        console.log(\"Setting now playing info\", options);\n    }\n    async enableComandCenter(options) {\n        console.log(\"Enabling lock screen control\", options);\n    }\n    async setLoop(options) {\n        this.isLooping = options.loop;\n        if (this.audio) {\n            this.audio.loop = this.isLooping;\n        }\n    }\n    async play(options) {\n        if (this.audio) {\n            console.log('plugin play() pause');\n            this.audio.pause();\n        }\n        console.log('plugin play() after pause');\n        this.audio = new Audio(options.url);\n        this.audio.id = \"pluginAudioElement\"; // Assigning an ID to the audio element\n        this.audio.loop = this.isLooping; // Set loop property\n        this.setupEventListeners(); // Call setupEventListeners here\n        await this.audio.play();\n        this.notifyListeners('play', {});\n        this.startTimeUpdates();\n    }\n    async pause() {\n        if (this.audio) {\n            this.audio.pause();\n            this.notifyListeners('pause', {});\n        }\n    }\n    async resume() {\n        if (this.audio) {\n            await this.audio.play();\n            this.notifyListeners('play', {});\n        }\n    }\n    async seekTo(options) {\n        if (this.audio) {\n            this.audio.currentTime = options.position;\n        }\n    }\n    async stop() {\n        if (this.audio) {\n            this.audio.pause();\n            this.audio.src = '';\n            this.audio.load();\n            this.audio.currentTime = 0;\n            this.audio = null;\n            this.notifyListeners('stop', {});\n            this.stopTimeUpdates();\n            console.log('stopped', this.audio);\n        }\n    }\n    async setPlaybackRate(options) {\n        if (this.audio) {\n            this.audio.playbackRate = options.rate;\n        }\n    }\n    startTimeUpdates() {\n        this.stopTimeUpdates();\n        this.intervalId = window.setInterval(() => {\n            if (this.audio) {\n                this.notifyListeners('timeUpdate', { currentTime: this.audio.currentTime });\n            }\n        }, 1000);\n    }\n    stopTimeUpdates() {\n        if (this.intervalId !== null) {\n            window.clearInterval(this.intervalId);\n            this.intervalId = null;\n        }\n    }\n    async setVolume(options) {\n        if (this.audio) {\n            this.audio.volume = options.volume;\n        }\n    }\n    setupEventListeners() {\n        if (this.audio) {\n            this.audio.onplaying = () => this.notifyListeners('play', {});\n            this.audio.onpause = () => this.notifyListeners('pause', {});\n            this.audio.onended = () => this.notifyListeners('stop', { ended: true });\n            this.audio.onerror = (e) => this.notifyListeners('error', { message: `Audio error: ${e}` });\n            this.audio.onwaiting = () => this.notifyListeners('buffering', { isBuffering: true });\n            this.audio.oncanplaythrough = () => this.notifyListeners('buffering', { isBuffering: false });\n        }\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}